<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>GM • Fichas</title>
<link href="./app.css" rel="stylesheet"/>
</head>
<body data-page="gm">
<main class="container">
<header class="topbar">
<div>
<h1>GM</h1>
<div class="muted">roomId: <code id="roomIdOut"></code> • code: <strong id="roomCodeOut">?</strong></div>
</div>
<button class="btn danger" id="btnSignOut">Sair</button>
</header>
<div class="status" id="status"></div><div aria-label="Abas principais" class="tabs" id="gmMainTabs"><button class="tab active" data-tab="mesa" type="button">Mesa</button><button class="tab" data-tab="acoes" type="button">Atribuições</button><button class="tab" data-tab="logs" type="button">Logs</button><button class="tab" data-tab="editor" type="button">Editor</button></div><div class="tabpane" data-pane="mesa"><section class="card" id="gmKeyCard">
<h2>Chave do GM</h2>
<div class="row wrap">
<input id="gmKeyOut" placeholder="(sem chave salva neste navegador)" readonly=""/>
<button class="btn" id="btnCopyGmKey">Copiar</button>
</div>
<div class="muted">Guarde esta chave. Ela permite recuperar o GM em outro navegador/dispositivo.</div>
</section><section class="grid2">
<div class="card">
<h2>Membros</h2>
<div class="list" id="membersList"></div>
</div>
<div class="card">
<h2>Fichas</h2>
<div class="row">
<button class="btn primary" id="btnNewSheet">Nova ficha</button>
</div>
<div class="list" id="sheetsList"></div>
</div>
</section></div><div class="tabpane hidden" data-pane="acoes"><section class="grid2">
<div class="card">
<h2>Atribuir ficha</h2>
<label>Player
          <select id="assignPlayer"></select>
</label>
<label>Ficha
          <select id="assignSheet"></select>
</label>
<button class="btn primary" id="btnAssign">Salvar atribuição</button>
<button class="btn danger" id="btnUnassign">Remover ficha do player</button>
</div>
<div class="card">
<h2>Import massivo</h2>
<label>Modo
          <select id="importMode">
<option value="MERGE">MERGE</option>
<option value="CREATE_ONLY">CREATE-ONLY</option>
</select>
</label>
<label>Upload .json
          <input accept=".json,application/json" id="importFile" type="file"/>
</label>
<label>JSON
          <textarea id="importText" rows="8" spellcheck="false"></textarea>
</label>
<div class="row">
<button class="btn" id="btnValidateImport">Validar</button>
<button class="btn primary" id="btnDoImport">Importar</button>
</div>
<pre class="pre" id="importReport"></pre>
</div>
</section></div><div class="tabpane hidden" data-pane="logs"><section class="card">
<h2>Logs de rolagem</h2>
<div class="muted">Mostra automaticamente as rolagens dos players (total). Clique em “Revelar” para ver os modificadores.</div>
<div class="row" style="margin-top:10px">
<button class="btn danger" id="btnClearRollLogs">Limpar logs</button>
</div>
<div class="list" id="rollLogsList" style="margin-top:10px"></div>
</section></div><div class="tabpane hidden" data-pane="editor"><section class="card" id="massDeletePane">
<h2>Excluir fichas em massa</h2>
<div class="row wrap" style="align-items:center;gap:8px;margin-top:8px">
  <button class="btn small" id="btnSelectAllSheets" type="button">Selecionar todas</button>
  <button class="btn small" id="btnSelectNoneSheets" type="button">Limpar seleção</button>
  <span class="muted" id="massDeleteCount">0 selecionadas</span>
</div>
<div class="list" id="massDeleteSheetsList" style="margin-top:10px"></div>
<div class="row wrap" style="margin-top:10px;gap:8px">
  <button class="btn danger" id="btnDeleteSelectedSheets" type="button">Deletar selecionadas</button>
  <button class="btn danger" id="btnDeleteAllSheets" type="button">Deletar TODAS</button>
</div>
<div class="muted" style="margin-top:8px">Isso remove as fichas e também limpa as atribuições que apontarem para elas.</div>
</section>

<section class="card" id="sheetEditorEmpty">
<div class="muted">Selecione uma ficha para editar ou clique “Nova ficha”.</div>
</section><section class="card hidden" id="sheetEditorPane">
<h2 id="sheetFormTitle">Criar</h2>
<form class="form" id="sheetForm">
<input id="sheetId" type="hidden"/>
<label>Nome (ID = slug do nome)
          <input id="sheetName"/>
</label>
<div class="grid4">
<label>QI <input id="attrQI" step="1" type="number"/></label>
<label>FOR <input id="attrFOR" step="1" type="number"/></label>
<label>DEX <input id="attrDEX" step="1" type="number"/></label>
<label>VIG <input id="attrVIG" step="1" type="number"/></label>
</div>
<label>Mental (int)
          <input id="mental" step="1" type="number"/>
</label>
<label>Anotações compartilhadas (GM + Player)
          <textarea id="sharedNotes" placeholder="Anotações da ficha..." rows="6" spellcheck="false"></textarea>
</label>
<div class="row">
<button class="btn primary" id="btnSaveSheet" type="submit">Salvar ficha</button>
<button class="btn" id="btnCancelSheet" type="button">Cancelar</button>
<button class="btn danger" id="btnDeleteSheet" type="button">Deletar ficha</button>
</div>
</form>
<hr/>
<section class="grid2">
<div>
<h3>Itens</h3>
<div class="row"><button class="btn small" id="btnAddItem">Adicionar</button></div>
<div class="list" id="itemsCrudList"></div>
</div>
<div>
<h3>Vantagens</h3>
<div class="row"><button class="btn small" id="btnAddAdv">Adicionar</button></div>
<div class="list" id="advantagesCrudList"></div>
</div>
</section>
<section class="grid2" style="margin-top:16px">
<div>
<h3>Desvantagens</h3>
<div class="row"><button class="btn small" id="btnAddDis">Adicionar</button></div>
<div class="list" id="disadvantagesCrudList"></div>
</div>
<div>
<h3>Editor</h3>
<div class="form">
<label>Categoria
              <select id="entryCategory">
<option value="items">items</option>
<option value="advantages">advantages</option>
<option value="disadvantages">disadvantages</option>
</select>
</label>
<input id="entryId" type="hidden"/>
<label>Nome <input id="entryName"/></label>
<label>Tipo
              <select id="entryType">
<option value="PASSIVA">PASSIVA</option>
<option value="ATIVA">ATIVA</option>
</select>
</label>
<label>Atributo base
              <select id="entryAttrBase">
<option value="">(nenhum)</option>
<option value="QI">QI</option>
<option value="FOR">FOR</option>
<option value="DEX">DEX</option>
<option value="VIG">VIG</option>
<option value="INTENCOES">INTENCOES</option>
<option value="DEF">DEF</option>
<option value="MOV">MOV</option>
<option value="INV">INV</option>
</select>
</label>
<label>modMode
              <select id="entryModMode">
<option value="NONE">NONE</option>
<option value="SOMA">SOMA</option>
<option value="MULT">MULT</option>
</select>
</label>
<label>modValue <input id="entryModValue" step="0.1" type="number"/></label>
<label>usesCurrent <input id="entryUsesCurrent" step="1" type="number"/></label>
<label>usesMax <input id="entryUsesMax" step="1" type="number"/></label>
<label>Descrição (visível ao Player)
              <textarea id="entryDesc" rows="3" placeholder="Texto que o player vê (ex.: efeito, lore, limitações)"></textarea>
</label>
<label>Anotações (visível ao Player)
              <textarea id="entryNotes" rows="3" placeholder="Notas adicionais"></textarea>
</label>
<div class="row">
<button class="btn primary small" id="btnSaveEntry" type="button">Salvar registro</button>
<button class="btn danger small" id="btnDeleteEntry" type="button">Deletar</button>
<button class="btn small" id="btnClearEntry" type="button">Limpar</button>
</div>
</div>
</div>
</section>
</section></div>






</main>
<script src="./app.js" type="module"></script>
</body>
</html>
